# MLOS Coding Standards

MLOS uses and supports multiple languages.  Here we document the coding styles and standards we attempt to adhere to and the tools we use to achieve that.

## C++

For C++ we mostly try to follow the [Google C++ style guidelines](https://google.github.io/styleguide/cppguide.html), with a few modifications.

Currently we rely on [uncrustify](https://github.com/uncrustify/uncrustify) to help enforce these rules (plus a little bit of human review).

See [build/uncrustify/README.md](../build/uncrustify/README.md#mlos-github-tree-view) for additional information.

Though we attempt to make it somewhat readable, we exclude code generated by MLOS from these strict style checks.

`uncrustify` is invoked as a part of the build process (see [02-Build.md](./02-Build.md) for details on temporarily disabling it locally).

## C#

We use [StyleCopAnalyzers](https://github.com/DotNetAnalyzers/StyleCopAnalyzers) to mostly follow the [standard recommended C# style guidelines](https://docs.microsoft.com/en-us/visualstudio/code-quality/rule-set-reference), with a few exceptions listed in [build/Mlos.NetCore.ruleset](../build/Mlos.NetCore.ruleset#mlos-github-tree-view).

Though we attempt to make it somewhat readable, we exclude code generated by MLOS from these strict style checks using an `<auto-generated />` tag file header.

`StyleCop` is invoked as a part of the build process (see [02-Build.md](./02-Build.md) for details on temporarily disabling it locally).

## Python

We use [`pylint`](https://pypi.org/project/pylint/) for Python code to mostly follow [PEP 8](https://www.python.org/dev/peps/pep-0008/) guidelines.  Its configuration can be found at [`source/.pylintrc`](../source/.pylintrc#mlos-github-tree-view).

To run it locally, issues the following commands:

1. One time install of the `pylint` tool:

    ```shell
    pip install pylint
    ```

2. Followed by:

    - Linux:

        ```sh
        scripts/run-python-checks.sh
        ```

    - Windows:

        ```cmd
        scripts\run-python-checks.cmd
        ```

We also use [`licenseheaders`](https://pypi.org/project/licenseheaders/) to add ensure license headers are added to `.py` files.

To run it locally, issues the following commands:

1. One time install of the `licenseheaders` tool:

    ```shell
    pip install licenseheaders
    ```

2. Followed by:

    - Linux:

        ```sh
        scripts/update-python-license-headers.sh
        ```

    - Windows:

        ```cmd
        scripts\update-python-license-headers.cmd
        ```

> Note: Currently this has issues with conflicting cross-platform line-ending styles.
>
> Use `git diff --ignore-cr-at-eol` to identify the differences.
